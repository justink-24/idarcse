<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gallery</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<header>
    <h1>Gallery</h1>
    <nav>
        <a href="/">Home</a>
        <a href="/upload">Upload</a>
        <a href="/upload-image-only">Upload Image Only</a>
        <a href="/model">3D Models</a>
        <a href="/gallery">Gallery</a>
        <a href="/videos">Videos</a>
    </nav>
</header>

<main>
    <!-- Upload Section -->
    <section>
        <h2>Upload a Photo</h2>
        <form action="{{ url_for('gallery') }}" method="POST" enctype="multipart/form-data">
            <input type="file" name="file" accept=".jpg,.jpeg,.png" required>
            <button type="submit">Upload</button>
        </form>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <ul>
              {% for category, message in messages %}
                <li class="flash-{{ category }}">{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    </section>

    <!-- Gallery Section -->
    <section>
        <h2>Team Photos</h2>
        <div class="artifacts">
            {% if photos %}
                {% for photo in photos %}
                <div class="artifact-card">
                    <img
                        src="{{ url_for('static', filename='team_photos/' ~ photo) }}"
                        alt="Gallery Photo"
                        class="gallery-photo">
                </div>
                {% endfor %}
            {% else %}
                <p>No photos uploaded yet.</p>
            {% endif %}
        </div>
    </section>
</main>

<footer>
    <p>&copy; 2026 ArcheScan</p>
</footer>

<!-- Image Modal -->
<div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
</div>

<!-- Modal Script -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("modalImage");
    const closeBtn = document.querySelector(".close");

    document.querySelectorAll(".gallery-photo").forEach(img => {
        img.addEventListener("click", () => {
            modal.style.display = "block";
            modalImg.src = img.src;
        });
    });

    closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
    });

    modal.addEventListener("click", (e) => {
        if (e.target === modal) {
            modal.style.display = "none";
        }
    });
});
</script>

</body>
</html>
